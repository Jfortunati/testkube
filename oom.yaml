apiVersion: v1
kind: Pod
metadata:
  name: oom-simulator
spec:
  containers:
    - name: oom-container
      image: python:3.8-slim
      command: ["python", "-c"]
      args:
        - |
          import time
          # This will consume memory rapidly until it hits an OOM condition
          a = []
          while True:
              print("Allocating memory...")
              a.append(' ' * 10**7)  # allocate 10MB at a time
              time.sleep(0.5)  # this will slow down the memory allocation a little
      resources:
        limits:
          memory: "100Mi"
